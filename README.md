# 使用yolo4_tiny 实现读取视频流进行目标识别并自动定位的弱自瞄项目

本项目只作为个人兴趣实现，没有做规范的标注和解释，所以不建议复现

**因为效果并没有很好，且神经网络本身很吃算力所以不适合实战，所以还是老实练枪吧**

1. 首先完成对身体姿态的识别
   1. 尝试调包，发现包的实现基础是目标识别框
   2. 尝试之前的github直接aimbot开源项目YOLOv5
      1. 首先通过注入dll来获取人物bbox数据
      2. 但是该项目是2years ago，所以注入失败
      3. 教训自然是先筛选最近的项目
   3. 发现有直接的数据
      1. https://universe.roboflow.com/new-workspace-rp0z0/csgo-train-yolo-v5/health
   4. 模型
      1. 使用bubbliiiing的yolo tiny进行训练
      2. 主要考虑到主机的性能不够
      3. 目前正在训练
         1. bug汇总
         2. Warning! ***HDF5 library version mismatched error***
            1. pip uninstall $ install
      4. 训练结果，test测试了下
         1. 感觉效果，没有很好
         2. 查看训练过程中的损失函数变化
         3. 总共训练了300次
            1. 100epoch:
            2. Total Loss: 0.020 || Val Loss: 0.032
            3. 300epoch:
            4. Total Loss: 0.016 || Val Loss: 0.032
         4. 所以很早的时候就收敛了
         5. 但总体的权重都没有很好
         6. 没有检测出来的情况我也不知道主要是因为什么，先放进视频看看效果
         7. 在fps代码中fps达到了80
         8. 视频检测的效果也没有很好
   5. 应用
      1. 在csgo中移动鼠标
         1. 应用pyautogui
         2. 更改游戏设置，取消鼠标的原始输入，并且关闭电脑鼠标设置中的鼠标加速功能，在提高鼠标移动精确度处取消勾
      2. 明确鼠标坐标在csgo中的移动方式
         1. 通过实时读取鼠标位置的信息，发现csgo游戏中的鼠标处于实时刷新状态，鼠标总会在一个时间点回到中心
         2. 我猜csgo的移动机制应该是在存在一个时钟周期，在上跳或者下跳过程中会计算其中存在多少移动指令，并在上调或者下调结束的瞬间实现窗口的移动
         3. 而且，画面的变换和鼠标移动的快慢有关
         4. 实现了屏幕的读取，以及网络对屏幕的识别
         5. 但是速度很慢，很慢，我不知道问题主要出在哪里，是保存图像还是算力不足,而且检测精度也不高
         6. 
2. 其次完成鼠标的移动和点击
   1. 平移原理的草稿在ipad,水平和垂直移动的原理相同
   2. 游戏实战中可以使用但很垃圾
   3. 首先移动太慢，其次不应该在移动过程中开枪
   4. 实战的移动是一抖一抖地移动过去的，但是照理来说应该直接移动到头上
      1. 所以问题出在哪里
      2. 想到有可能还是时间设置过长，比csgo刷新移动的时间要长，所以导致未移动完就被截断了
      3. 问题解决了，核心原因在于灵敏度的设置，3.5
         1. 因为pyautogui.moveTo(x, y, duration=num_seconds)  
         2. 以及pyautogui.moveRel(x, y, duration=num_seconds)  
         3. 两者的移动原理我猜测是产生鼠标移动数据而不直接代表人物在csgo游戏环境中的移动
         4. 所以我一开始希望达到的目标直接锁头很显然是无法完成的
         5. 因为在csgo游戏环境中的移动还与鼠标灵敏度有关
         6. 真正的移动应该是代码语句产生的移动指令乘上灵敏度
         7. 上面的两行代码都是可行的，但是参数和意义都不同
            1. moveTo的瞄准原理更像模糊运算，朝目标移动，但是目标的坐标是屏幕的坐标，且moveTo直接朝该坐标移动，并没有考虑游戏内的角度移动，因为（。。自己开动脑筋去想。。），所以灵敏度参数的设定最好的情况应该就是考虑宽pov的移动情况
            2. moveRel的瞄准原理就相对准确，且会涉及调参问题，照理来说会存在一个适用所有情况的灵敏度参数
   5. 还有多目标如何选择问题
